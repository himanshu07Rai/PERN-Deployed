(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{75:function(t,e,n){"use strict";n.r(e);var r,o,a,c,s,i,u,l,d,p,b,j,f=n(0),h=n(23),O=n.n(h),x=n(7),g=n(8),m=Object(g.a)(r||(r=Object(x.a)(["\n*{\n    margin: 0;\n    padding: 0;\n    outline: 0;\n    box-sizing: border-box;\n    text-decoration: none;\n}\n\nbody{\n    font-size: 16px;\n}\n"]))),v=n(21),y=n(44),w=n(30),k=n(3),S="REGISTER_SUCCESS",E="REGISTER_FAIL",A="USER_LOADED",D="AUTH_ERROR",_="LOGIN_SUCCESS",C="LOGIN_FAIL",I="LOGOUT",T="DATA_LOADED",L="ADD_TODO",R="TODO_DELETED",N="SELECT_TODO",z="TEXT_CHANGE",G="EDIT_TODO",J={todos:[],text:"",selectedId:null},U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case T:return Object(k.a)(Object(k.a)({},t),{},{todos:r});case L:return Object(k.a)(Object(k.a)({},t),{},{todos:[].concat(Object(w.a)(t.todos),[r]),text:""});case R:return Object(k.a)(Object(k.a)({},t),{},{todos:t.todos.filter((function(t){return t.todo_id!==r}))});case I:return Object(k.a)(Object(k.a)({},t),{},{todos:[]});case N:var o=t.todos.filter((function(t){return t.todo_id===r}));return console.log(r),Object(k.a)(Object(k.a)({},t),{},{text:o[0].description,selectedId:r});case z:return Object(k.a)(Object(k.a)({},t),{},{text:r});case G:console.log(r);var a=t.todos.findIndex((function(t){return t.todo_id===r.todo_id}));console.log(a);var c=Object(w.a)(t.todos);return c[a].description=r.description,Object(k.a)(Object(k.a)({},t),{},{todos:c,selectedId:null,text:""});default:return t}},F={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null},H=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,e=arguments.length>1?arguments[1]:void 0,n=e.type,r=e.payload;switch(n){case A:return Object(k.a)(Object(k.a)({},t),{},{isAuthenticated:!0,user:r,loading:!1});case S:case _:return localStorage.setItem("token",r),Object(k.a)(Object(k.a)({},t),{},{token:r,isAuthenticated:!0,loading:!1});case E:case C:case D:case I:return localStorage.removeItem("token"),Object(k.a)(Object(k.a)({},t),{},{token:null,isAuthenticated:!1,user:null,loading:!1});default:return t}},P=Object(v.combineReducers)({auth:H,dashboard:U}),B=n(45),M=Object(v.createStore)(P,Object(y.composeWithDevTools)(Object(v.applyMiddleware)(B.a))),W=n(6),X=n(4),q=n.n(X),K=n(11),Q=n(14),V=n.n(Q),Y=function(t){t?V.a.defaults.headers.common["auth-token"]=t:delete V.a.defaults.headers.common["auth-token"]},Z=function(){return function(){var t=Object(K.a)(q.a.mark((function t(e){var n;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return localStorage.token&&Y(localStorage.token),t.prev=1,t.next=4,V.a.get("http://localhost:4000/auth");case 4:n=t.sent,e({type:A,payload:n.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e({type:D});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},$=function(t){return function(){var e=Object(K.a)(q.a.mark((function e(n){var r,o,a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-type":"Application/json"}},o=JSON.stringify(t),e.prev=2,e.next=5,V.a.post("http://localhost:4000/auth/register",o,r);case 5:a=e.sent,console.log(a.data),n({type:S,payload:a.data}),n(Z()),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0.message),n({type:E});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},tt=n(16),et=n(5),nt=n(1),rt=g.b.form(o||(o=Object(x.a)(["\n  /* padding: 1.2rem 0; */\n  display: flex;\n  /* flex-direction: column; */\n  justify-content: center;\n  align-items: center;\n"]))),ot=g.b.input(a||(a=Object(x.a)(["\n  border-radius: 10px;\n  padding: 10px;\n  margin: 10px;\n  font-size: 17px;\n  width: 90%;\n"]))),at=g.b.button(c||(c=Object(x.a)(["\n  margin-right: 10px;\n  transition: transform 0.2s;\n  font-size: 17px;\n  border: none;\n  border-radius: 10px;\n  padding: 10px 20px;\n  cursor: pointer;\n  background-color: #0f6;\n  color: #fff;\n  &:hover {\n    transform: scale(1.2);\n  }\n"]))),ct=function(){var t=Object(W.b)(),e=Object(W.c)((function(t){return t.dashboard.text})),n=Object(W.c)((function(t){return t.dashboard.selectedId}));console.log(n),console.log(e);var r=function(r){var o;r.preventDefault(),console.log(e),t(n?function(t){var e=t.description,n=t.selectedId;return function(){var t=Object(K.a)(q.a.mark((function t(r){var o,a,c;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o={headers:{"Content-type":"Application/json"}},console.log({description:e}),a=JSON.stringify({description:e}),console.log(a),t.next=7,V.a.put("http://localhost:4000/todos/".concat(n),a,o);case 7:c=t.sent,console.log(c.data),r({type:G,payload:c.data}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}({description:e,selectedId:n}):(o={description:e},function(){var t=Object(K.a)(q.a.mark((function t(e){var n,r,a;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={headers:{"Content-type":"Application/json"}},r=JSON.stringify(o),t.next=5,V.a.post("http://localhost:4000/todos",r,n);case 5:a=t.sent,console.log(a.data),e({type:L,payload:a.data}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()))};return Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsx)("h2",{children:"Add Todo"}),Object(nt.jsxs)(rt,{onSubmit:function(t){return r(t)},children:[Object(nt.jsx)(ot,{type:"text",placeholder:"Description..",value:e,onChange:function(e){return t((n=e.target.value,function(t){t({type:z,payload:n})}));var n}}),Object(nt.jsx)(at,{type:"submit",children:"Add"})]})]})},st=g.b.ul(s||(s=Object(x.a)(["\n  padding: 0;\n"]))),it=g.b.li(i||(i=Object(x.a)(["\n  display: flex;\n  list-style: none;\n  overflow: hidden;\n  width: 100%;\n  margin-bottom: 10px;\n  justify-content: space-evenly;\n  align-items: center;\n"]))),ut=g.b.button(u||(u=Object(x.a)(["\n  float: right;\n  background: palevioletred;\n  color: #fff;\n  border-radius: 3px;\n  border: 2px solid palevioletred;\n  padding: 3px 10px;\n  outline: none;\n  cursor: pointer;\n"]))),lt=function(t){var e=t.todos,n=e.filter((function(t){return null!==t.todo_id})),r=Object(W.b)(),o=function(t){r(function(t){return function(){var e=Object(K.a)(q.a.mark((function e(n){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.a.delete("http://localhost:4000/todos/".concat(t));case 3:n({type:R,payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}(t))},a=function(t){r(function(t){return function(e){console.log(t);try{e({type:N,payload:t})}catch(n){console.log(n.message)}}}(t))};return e?0===n.length?Object(nt.jsx)("h1",{children:"No todos!"}):Object(nt.jsx)(st,{children:n.map((function(t){return Object(nt.jsxs)(it,{children:[t.description,Object(nt.jsx)(ut,{type:"button",onClick:function(e){return a(t.todo_id)},children:"Edit"}),Object(nt.jsx)(ut,{type:"button",onClick:function(){return o(t.todo_id)},children:"Delete"})]},t.todo_id)}))}):Object(nt.jsx)("h1",{children:"Loading"})},dt=function(){var t=Object(W.b)(),e=Object(W.c)((function(t){return t.auth.user})),n=function(){var e=Object(K.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(function(){var t=Object(K.a)(q.a.mark((function t(e){var n;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V.a.get("http://localhost:4000/todos");case 3:n=t.sent,e({type:T,payload:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(f.useEffect)((function(){n()}),[e]);var r=Object(W.c)((function(t){return t.auth.loading})),o=Object(W.c)((function(t){return t.dashboard.todos}));return r||0===o.length?Object(nt.jsx)("h1",{children:"Loading"}):Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsx)("button",{onClick:function(){return t((function(t){t({type:I})}))},children:"Logout"}),Object(nt.jsxs)("h1",{children:["Hi ",e.user_name]}),Object(nt.jsx)(ct,{}),Object(nt.jsx)(lt,{todos:o})]})},pt=function(){return Object(nt.jsxs)("div",{children:[Object(nt.jsx)(tt.b,{to:"/register",children:"Register"}),Object(nt.jsx)(tt.b,{to:"/login",children:"Login"})]})},bt=n(20),jt=n(25),ft=g.b.div(l||(l=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: center;\n  min-height: 100vh;\n  background-color: #f3f3f3;\n"]))),ht=g.b.div(d||(d=Object(x.a)(["\n  box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n  padding: 50px;\n  width: 100%;\n  max-width: 450px;\n  border-radius: 15px;\n  background-color: #ffff;\n  text-align: center;\n\n  h2 {\n    font-size: 50px;\n    font-weight: 800;\n    margin-bottom: 50px;\n  }\n  span {\n    display: block;\n    margin-top: 40px;\n    color: #888888;\n    font-size: 18px;\n  }\n  a {\n    margin-left: 4px;\n    color: #2f8bfd;\n  }\n\n  @media (max-width: 600px) {\n    max-width: 90%;\n  }\n"]))),Ot=g.b.form(p||(p=Object(x.a)(["\n  padding: 1.2rem 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),xt=g.b.input(b||(b=Object(x.a)(["\n  transition: transform 0.2s;\n  border: none;\n  border-bottom: 1px solid #000;\n  /* border-radius: 10px; */\n  padding: 10px;\n  margin: 5px;\n  font-size: 17px;\n  width: 250px;\n  &:hover {\n    transform: scale(1.1);\n  }\n"]))),gt=g.b.button(j||(j=Object(x.a)(["\n  transition: transform 0.2s;\n  font-size: 17px;\n  border: #fff;\n  border-radius: 10px;\n  margin-top: 20px;\n  padding: 10px 20px;\n  display: block;\n  cursor: pointer;\n  background-color: blueviolet;\n  color: #fff;\n  &:hover {\n    transform: scale(1.2);\n  }\n"]))),mt=function(){var t=Object(W.b)(),e=Object(W.c)((function(t){return t.auth.isAuthenticated})),n=Object(f.useState)({email:"",password:""}),r=Object(jt.a)(n,2),o=r[0],a=r[1],c=o.email,s=o.password,i=function(t){a(Object(k.a)(Object(k.a)({},o),{},Object(bt.a)({},t.target.name,t.target.value)))},u=function(e){e.preventDefault(),t(function(t){return function(){var e=Object(K.a)(q.a.mark((function e(n){var r,o,a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-type":"Application/json"}},o=JSON.stringify(t),e.prev=2,e.next=5,V.a.post("http://localhost:4000/auth/login",o,r);case 5:a=e.sent,console.log(a.data),n({type:_,payload:a.data}),n(Z()),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0.message),n({type:C});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()}(o))};return e?Object(nt.jsx)(et.a,{to:"/dashboard"}):Object(nt.jsx)(ft,{children:Object(nt.jsxs)(ht,{children:[Object(nt.jsx)("h2",{children:"Log in"}),Object(nt.jsxs)(Ot,{onSubmit:function(t){return u(t)},children:[Object(nt.jsx)(xt,{type:"email",placeholder:"Email",name:"email",value:c,onChange:function(t){return i(t)}}),Object(nt.jsx)(xt,{type:"password",placeholder:"Password",name:"password",value:s,onChange:function(t){return i(t)}}),Object(nt.jsx)(gt,{type:"submit",children:"Submit"})]}),Object(nt.jsxs)("span",{children:["Don't have an account ?",Object(nt.jsx)(tt.b,{to:"/register",children:"Register"})]})]})})},vt=n(46),yt=["component"],wt=function(t){var e=t.component,n=(Object(vt.a)(t,yt),Object(W.c)((function(t){return t.auth})));return n.isAuthenticated||n.loading?Object(nt.jsx)(e,{}):Object(nt.jsx)(et.a,{to:"/login"})},kt=function(){var t=Object(W.b)(),e=Object(W.c)((function(t){return t.auth.isAuthenticated})),n=Object(f.useState)({name:"",email:"",password:""}),r=Object(jt.a)(n,2),o=r[0],a=r[1],c=o.name,s=o.email,i=o.password,u=function(t){a(Object(k.a)(Object(k.a)({},o),{},Object(bt.a)({},t.target.name,t.target.value)))},l=function(){var e=Object(K.a)(q.a.mark((function e(n){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t($(o)),a({name:"",email:"",password:""});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return e?Object(nt.jsx)(et.a,{to:"/dashboard"}):Object(nt.jsx)(ft,{children:Object(nt.jsxs)(ht,{children:[Object(nt.jsx)("h2",{children:"Register"}),Object(nt.jsxs)(Ot,{onSubmit:function(t){return l(t)},children:[Object(nt.jsx)(xt,{type:"text",placeholder:"Name",name:"name",value:c,onChange:function(t){return u(t)}}),Object(nt.jsx)(xt,{type:"email",placeholder:"Email",value:s,name:"email",onChange:function(t){return u(t)}}),Object(nt.jsx)(xt,{type:"password",placeholder:"Password",name:"password",value:i,onChange:function(t){return u(t)}}),Object(nt.jsx)(gt,{type:"submit",children:"Submit"})]}),Object(nt.jsxs)("span",{children:["Already have an account ?",Object(nt.jsx)(tt.b,{to:"/login",children:"Log in"})]})]})})};var St=function(){return Object(nt.jsx)(tt.a,{children:Object(nt.jsxs)(et.d,{children:[Object(nt.jsx)(et.b,{exact:!0,path:"/",component:pt}),Object(nt.jsx)(et.b,{exact:!0,path:"/register",component:kt}),Object(nt.jsx)(et.b,{exact:!0,path:"/login",component:mt}),Object(nt.jsx)(wt,{exact:!0,path:"/dashboard",component:dt})]})})},Et=function(){return Object(f.useEffect)((function(){M.dispatch(Z())}),[]),Object(nt.jsx)("div",{children:Object(nt.jsx)(St,{})})};O.a.render(Object(nt.jsxs)(W.a,{store:M,children:[Object(nt.jsx)(m,{}),Object(nt.jsx)(Et,{})]}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.d05d91cf.chunk.js.map
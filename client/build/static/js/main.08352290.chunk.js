(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{79:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a,r,o,c,i,s,u,d,l,p,b,j,f,x,h=n(1),O=n(25),g=n.n(O),m=n(8),v=n(9),y=Object(v.a)(a||(a=Object(m.a)(["\n*{\n    margin: 0;\n    padding: 0;\n    outline: 0;\n    box-sizing: border-box;\n    text-decoration: none;\n}\n\nbody{\n    font-size: 16px;\n}\n"]))),w=n(22),k=n(45),S=n(24),E=n(4),A="SET_ALERT",T="REMOVE_ALERT",_="REGISTER_SUCCESS",N="REGISTER_FAIL",D="USER_LOADED",C="AUTH_ERROR",I="LOGIN_SUCCESS",L="LOGIN_FAIL",R="LOGOUT",z="DATA_LOADED",G="ADD_TODO",J="TODO_DELETED",U="SELECT_TODO",F="TEXT_CHANGE",H="EDIT_TODO",P={todos:[],text:"",selectedId:null},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case z:return console.log(a),Object(E.a)(Object(E.a)({},e),{},{todos:a});case G:return Object(E.a)(Object(E.a)({},e),{},{todos:[].concat(Object(S.a)(e.todos),[a]),text:""});case J:return Object(E.a)(Object(E.a)({},e),{},{todos:e.todos.filter((function(e){return e.todo_id!==a}))});case R:return Object(E.a)(Object(E.a)({},e),{},{todos:[]});case U:var r=e.todos.filter((function(e){return e.todo_id===a}));return console.log(a),Object(E.a)(Object(E.a)({},e),{},{text:r[0].description,selectedId:a});case F:return Object(E.a)(Object(E.a)({},e),{},{text:a});case H:console.log(a);var o=e.todos.findIndex((function(e){return e.todo_id===a.todo_id}));console.log(o);var c=Object(S.a)(e.todos);return c[o].description=a.description,Object(E.a)(Object(E.a)({},e),{},{todos:c,selectedId:null,text:""});default:return e}},M={token:localStorage.getItem("token"),isAuthenticated:!1,loading:!0,user:{}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case D:return Object(E.a)(Object(E.a)({},e),{},{isAuthenticated:!0,user:a,loading:!1});case _:case I:return localStorage.setItem("token",a),Object(E.a)(Object(E.a)({},e),{},{token:a,loading:!1});case N:case L:case C:case R:return localStorage.removeItem("token"),Object(E.a)(Object(E.a)({},e),{},{token:null,isAuthenticated:!1,user:null,loading:!1});default:return e}},B=[],V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case A:return[].concat(Object(S.a)(e),[a]);case T:return e.filter((function(e){return e.id!==a}));default:return e}},X=Object(w.combineReducers)({auth:q,dashboard:W,alert:V}),K=n(46),Q=Object(w.createStore)(X,Object(k.composeWithDevTools)(Object(w.applyMiddleware)(K.a))),Y=n(5),Z=n(6),$=n.n(Z),ee=n(12),te=n(15),ne=n.n(te),ae=n(82),re=function(e){e?ne.a.defaults.headers.common["auth-token"]=e:delete ne.a.defaults.headers.common["auth-token"]},oe=function(){return function(){var e=Object(ee.a)($.a.mark((function e(t){var n,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&re(localStorage.token),e.prev=1,e.next=4,ne.a.get("/api/auth");case 4:n=e.sent,t({type:D,payload:n.data}),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(1),a=Object(ae.a)(),t({type:A,payload:{id:a,msg:"Not authenticated",type:"Warning"}}),t({type:C}),setTimeout((function(){t({type:T,payload:a})}),1e3);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},ce=function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n){var a,r,o;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{"Content-type":"Application/json"}},r=JSON.stringify(e),t.prev=2,t.next=5,ne.a.post("/api/auth/register",r,a);case 5:o=t.sent,console.log(o.data),n({type:_,payload:o.data}),n(oe()),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(2),console.log(t.t0.message),n({type:N});case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()},ie=n(17),se=n(7),ue=n(2),de=v.b.form(r||(r=Object(m.a)(["\n  /* padding: 1.2rem 0; */\n  display: flex;\n  /* flex-direction: column; */\n  justify-content: center;\n  align-items: center;\n"]))),le=v.b.input(o||(o=Object(m.a)(["\n  border-radius: 10px;\n  padding: 10px;\n  margin: 10px;\n  font-size: 17px;\n  width: 90%;\n"]))),pe=(v.b.button(c||(c=Object(m.a)(["\n  margin-right: 10px;\n  transition: transform 0.2s;\n  font-size: 17px;\n  border: none;\n  border-radius: 10px;\n  padding: 10px 20px;\n  cursor: pointer;\n  background-color: #0f6;\n  color: #fff;\n  &:hover {\n    transform: scale(1.2);\n  }\n"]))),function(){var e=Object(Y.b)(),t=Object(Y.c)((function(e){return e.dashboard.text})),n=Object(Y.c)((function(e){return e.dashboard.selectedId}));console.log(n),console.log(t);var a=function(a){var r;a.preventDefault(),console.log(t),e(n?function(e){var t=e.description,n=e.selectedId;return function(){var e=Object(ee.a)($.a.mark((function e(a){var r,o,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={headers:{"Content-type":"Application/json"}},console.log({description:t}),o=JSON.stringify({description:t}),console.log(o),e.next=7,ne.a.put("/api/todos/".concat(n),o,r);case 7:c=e.sent,console.log(c.data),a({type:H,payload:c.data}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()}({description:t,selectedId:n}):(r={description:t},function(){var e=Object(ee.a)($.a.mark((function e(t){var n,a,o;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{"Content-type":"Application/json"}},a=JSON.stringify(r),e.next=5,ne.a.post("/api/todos",a,n);case 5:o=e.sent,console.log(o.data),t({type:G,payload:o.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()))};return Object(ue.jsx)(ue.Fragment,{children:Object(ue.jsxs)(de,{onSubmit:function(e){return a(e)},children:[Object(ue.jsx)(le,{type:"text",placeholder:"Description..",value:t,onChange:function(t){return e((n=t.target.value,function(e){e({type:F,payload:n})}));var n}}),Object(ue.jsx)("button",{type:"submit",className:"todo-button",children:"Add Todo"})]})})}),be=n(48),je=n(47),fe=v.b.ul(i||(i=Object(m.a)(["\n  display: flex;\n  flex-direction: column;\n  position: relative;\n"]))),xe=v.b.li(s||(s=Object(m.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin: 4px auto;\n  color: #fff;\n  background: linear-gradient(\n    90deg,\n    rgba(255, 118, 20, 1) 0%,\n    rgba(255, 84, 17, 1) 100%\n  );\n\n  padding: 16px;\n  border-radius: 5px;\n  width: 90%;\n"]))),he=v.b.div(u||(u=Object(m.a)(["\n  display: flex;\n  align-items: center;\n  font-size: 24px;\n  cursor: pointer;\n"]))),Oe=function(e){var t=e.todos,n=t.filter((function(e){return null!==e.todo_id})),a=Object(Y.b)(),r=function(e){a(function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ne.a.delete("/api/todos/".concat(e));case 3:n({type:J,payload:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}(e))},o=function(e){a(function(e){return function(t){console.log(e);try{t({type:U,payload:e})}catch(n){console.log(n.message)}}}(e))};return t?0===n.length?Object(ue.jsx)("h1",{children:"No todos!"}):Object(ue.jsx)(fe,{children:n.map((function(e){return Object(ue.jsxs)(xe,{children:[e.description,Object(ue.jsxs)(he,{children:[Object(ue.jsx)(je.a,{className:"edit-icon",onClick:function(t){return o(e.todo_id)}}),Object(ue.jsx)(be.a,{className:"delete-icon",onClick:function(){return r(e.todo_id)}})]})]},e.todo_id)}))}):Object(ue.jsx)("h1",{children:"Loading"})},ge=n(49),me=v.b.div(d||(d=Object(m.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  width: 520px;\n  min-height: 600px;\n  background: #161a2b;\n  text-align: center;\n  margin: 128px auto;\n  border-radius: 10px;\n  padding-bottom: 32px;\n\n  @media (max-width: 400px) {\n    width: 90vw;\n  }\n"]))),ve=v.b.div(l||(l=Object(m.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 30px;\n  width: 30px;\n  z-index: 20;\n  margin: 20px;\n"]))),ye=function(){var e=Object(Y.b)(),t=Object(Y.c)((function(e){return e.auth.user}));Object(h.useEffect)((function(){(function(){var t=Object(ee.a)($.a.mark((function t(){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(function(){var e=Object(ee.a)($.a.mark((function e(t){var n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne.a.get("/api/todos");case 3:n=e.sent,t({type:z,payload:n.data.Todo}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[t,e]);var n=Object(Y.c)((function(e){return e.auth.loading})),a=Object(Y.c)((function(e){return e.dashboard.todos}));return n?Object(ue.jsx)("h1",{children:"Loading"}):(console.log(a),Object(ue.jsxs)(ue.Fragment,{children:[Object(ue.jsx)(ve,{children:Object(ue.jsx)(ge.a,{onClick:function(){return e((function(e){e({type:R})}))}})}),Object(ue.jsxs)(me,{children:[Object(ue.jsxs)("h1",{children:["Hi ",t.user_name," ,What's the Plan for Today?"]}),Object(ue.jsx)(pe,{}),Object(ue.jsx)(Oe,{todos:a})]})]}))},we=function(){return Object(Y.c)((function(e){return e.alert})).map((function(e){return Object(ue.jsx)("div",{children:e.msg},e.id)}))},ke=function(){return Object(Y.c)((function(e){return e.auth.isAuthenticated}))?Object(ue.jsx)(se.a,{to:"/dashboard"}):Object(ue.jsx)("section",{className:"landing",children:Object(ue.jsx)("div",{className:"dark-overlay",children:Object(ue.jsxs)("div",{className:"landing-inner",children:[Object(ue.jsx)("h1",{className:"x-large",children:"Lets Todo It !"}),Object(ue.jsx)("p",{className:"lead",children:"Structure your day and conquer every problem"}),Object(ue.jsxs)("div",{className:"buttons",children:[Object(ue.jsx)(ie.b,{className:"btn btn-primary",to:"/register",children:"Register"}),Object(ue.jsx)(ie.b,{to:"/login",className:"btn btn-light",children:"Login"})]})]})})})},Se=n(21),Ee=n(27),Ae=v.b.div(p||(p=Object(m.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: center;\n  min-height: 100vh;\n"]))),Te=v.b.div(b||(b=Object(m.a)(["\n  box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;\n  padding: 50px;\n  width: 100%;\n  max-width: 450px;\n  border-radius: 15px;\n  background-color: #ffff;\n  text-align: center;\n\n  h2 {\n    font-size: 50px;\n    font-weight: 800;\n    margin-bottom: 50px;\n  }\n  span {\n    display: block;\n    margin-top: 40px;\n    color: #888888;\n    font-size: 18px;\n  }\n  a {\n    margin-left: 4px;\n    color: #2f8bfd;\n  }\n\n  @media (max-width: 600px) {\n    max-width: 90%;\n  }\n"]))),_e=v.b.form(j||(j=Object(m.a)(["\n  padding: 1.2rem 0;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),Ne=v.b.input(f||(f=Object(m.a)(["\n  transition: transform 0.2s;\n  border: none;\n  border-bottom: 1px solid #000;\n  /* border-radius: 10px; */\n  padding: 10px;\n  margin: 5px;\n  font-size: 17px;\n  width: 250px;\n  &:hover {\n    transform: scale(1.1);\n  }\n"]))),De=v.b.button(x||(x=Object(m.a)(["\n  transition: transform 0.2s;\n  font-size: 17px;\n  border: #fff;\n  border-radius: 10px;\n  margin-top: 20px;\n  padding: 10px 20px;\n  display: block;\n  cursor: pointer;\n  background-color: blueviolet;\n  color: #fff;\n  &:hover {\n    transform: scale(1.2);\n  }\n"]))),Ce=function(){var e=Object(Y.b)(),t=Object(Y.c)((function(e){return e.auth.isAuthenticated})),n=Object(h.useState)({email:"",password:""}),a=Object(Ee.a)(n,2),r=a[0],o=a[1],c=r.email,i=r.password,s=function(e){o(Object(E.a)(Object(E.a)({},r),{},Object(Se.a)({},e.target.name,e.target.value)))},u=function(t){t.preventDefault(),e(function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n){var a,r,o,c,i;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{"Content-type":"Application/json"}},r=JSON.stringify(e),t.prev=2,t.next=5,ne.a.post("/api/auth/login",r,a);case 5:o=t.sent,n({type:I,payload:o.data}),console.log("1"),n(oe()),console.log("2"),t.next=21;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0.response.data),c=Object(ae.a)(),i=t.t0.response.data.error,console.log(i),n({type:A,payload:{id:c,msg:i.message,type:"Error"}}),setTimeout((function(){n({type:T,payload:c})}),3e3),n({type:L});case 21:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}()}(r))};return t?Object(ue.jsx)(se.a,{to:"/dashboard"}):Object(ue.jsxs)(Ae,{children:[Object(ue.jsx)(we,{}),Object(ue.jsxs)(Te,{children:[Object(ue.jsx)("h2",{children:"Log in"}),Object(ue.jsxs)(_e,{onSubmit:function(e){return u(e)},children:[Object(ue.jsx)(Ne,{type:"email",placeholder:"Email",name:"email",value:c,onChange:function(e){return s(e)}}),Object(ue.jsx)(Ne,{type:"password",placeholder:"Password",name:"password",value:i,onChange:function(e){return s(e)}}),Object(ue.jsx)(De,{type:"submit",children:"Submit"})]}),Object(ue.jsxs)("span",{children:["Don't have an account ?",Object(ue.jsx)(ie.b,{to:"/register",children:"Register"})]})]})]})},Ie=n(50),Le=["component"],Re=function(e){var t=e.component,n=(Object(Ie.a)(e,Le),Object(Y.c)((function(e){return e.auth})));return n.isAuthenticated||n.loading?Object(ue.jsx)(t,{}):Object(ue.jsx)(se.a,{to:"/login"})},ze=function(){var e=Object(Y.b)(),t=Object(Y.c)((function(e){return e.auth.isAuthenticated})),n=Object(h.useState)({name:"",email:"",password:""}),a=Object(Ee.a)(n,2),r=a[0],o=a[1],c=r.name,i=r.email,s=r.password,u=function(e){o(Object(E.a)(Object(E.a)({},r),{},Object(Se.a)({},e.target.name,e.target.value)))},d=function(){var t=Object(ee.a)($.a.mark((function t(n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e(ce(r)),o({name:"",email:"",password:""});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return t?Object(ue.jsx)(se.a,{to:"/dashboard"}):Object(ue.jsx)(Ae,{children:Object(ue.jsxs)(Te,{children:[Object(ue.jsx)("h2",{children:"Register"}),Object(ue.jsxs)(_e,{onSubmit:function(e){return d(e)},children:[Object(ue.jsx)(Ne,{type:"text",placeholder:"Name",name:"name",value:c,onChange:function(e){return u(e)}}),Object(ue.jsx)(Ne,{type:"email",placeholder:"Email",value:i,name:"email",onChange:function(e){return u(e)}}),Object(ue.jsx)(Ne,{type:"password",placeholder:"Password",name:"password",value:s,onChange:function(e){return u(e)}}),Object(ue.jsx)(De,{type:"submit",children:"Submit"})]}),Object(ue.jsxs)("span",{children:["Already have an account ?",Object(ue.jsx)(ie.b,{to:"/login",children:"Log in"})]})]})})};var Ge=function(){return Object(ue.jsx)(ie.a,{children:Object(ue.jsxs)(se.d,{children:[Object(ue.jsx)(se.b,{exact:!0,path:"/",component:ke}),Object(ue.jsx)(se.b,{exact:!0,path:"/register",component:ze}),Object(ue.jsx)(se.b,{exact:!0,path:"/login",component:Ce}),Object(ue.jsx)(Re,{exact:!0,path:"/dashboard",component:ye})]})})},Je=(n(79),function(){var e=Object(Y.b)();return Object(h.useEffect)((function(){e(oe())}),[e]),localStorage.token&&re(localStorage.token),Object(ue.jsx)("div",{children:Object(ue.jsx)(Ge,{})})});g.a.render(Object(ue.jsxs)(Y.a,{store:Q,children:[Object(ue.jsx)(y,{}),Object(ue.jsx)(Je,{})]}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.08352290.chunk.js.map